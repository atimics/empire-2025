{:source "visibility.txt", :tests [{:line 6, :description "Army reveals 3x3 around itself.", :givens [{:type :map, :target :game-map, :rows ["#####" "##A##" "#####"]} {:type :map, :target :player-map, :rows ["....." "....." "....."]}], :whens [{:type :visibility-update}], :thens [{:type :player-map-cell-not-nil, :coords [1 0]} {:type :player-map-cell-not-nil, :coords [2 0]} {:type :player-map-cell-not-nil, :coords [3 0]} {:type :player-map-cell-not-nil, :coords [1 1]} {:type :player-map-cell-not-nil, :coords [2 1]} {:type :player-map-cell-not-nil, :coords [3 1]} {:type :player-map-cell-not-nil, :coords [1 2]} {:type :player-map-cell-not-nil, :coords [2 2]} {:type :player-map-cell-not-nil, :coords [3 2]}]} {:line 30, :description "Unexplored cells are not visible.", :givens [{:type :map, :target :game-map, :rows ["###" "###" "###"]} {:type :map, :target :player-map, :rows ["..." "..." "..."]}], :whens [], :thens [{:type :player-map-cell-nil, :coords [0 0]} {:type :player-map-cell-nil, :coords [1 1]} {:type :player-map-cell-nil, :coords [2 2]}]} {:line 46, :description "City reveals surroundings.", :givens [{:type :map, :target :game-map, :rows ["###" "#O#" "###"]} {:type :map, :target :player-map, :rows ["..." "..." "..."]}], :whens [{:type :visibility-update}], :thens [{:type :player-map-cell-not-nil, :coords [0 0]} {:type :player-map-cell-not-nil, :coords [1 0]} {:type :player-map-cell-not-nil, :coords [2 0]} {:type :player-map-cell-not-nil, :coords [0 1]} {:type :player-map-cell-not-nil, :coords [1 1]} {:type :player-map-cell-not-nil, :coords [2 1]} {:type :player-map-cell-not-nil, :coords [0 2]} {:type :player-map-cell-not-nil, :coords [1 2]} {:type :player-map-cell-not-nil, :coords [2 2]}]} {:line 70, :description "Enemy units hidden in fog.", :givens [{:type :map, :target :game-map, :rows ["A####a"]} {:type :map, :target :player-map, :rows ["......"]}], :whens [{:type :visibility-update}], :thens [{:type :player-map-cell-not-nil, :coords [0 0]} {:type :player-map-cell-not-nil, :coords [1 0]} {:type :player-map-cell-nil, :coords [5 0]}]} {:line 84, :description "Satellite reveals 5x5 area.", :givens [{:type :map, :target :game-map, :rows ["#####" "#####" "##V##" "#####" "#####"]} {:type :map, :target :player-map, :rows ["....." "....." "....." "....." "....."]}], :whens [{:type :visibility-update}], :thens [{:type :player-map-cell-not-nil, :coords [0 0]} {:type :player-map-cell-not-nil, :coords [4 4]} {:type :player-map-cell-not-nil, :coords [0 4]} {:type :player-map-cell-not-nil, :coords [4 0]} {:type :player-map-cell-not-nil, :coords [2 2]}]}]}