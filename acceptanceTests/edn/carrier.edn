{:source "carrier.txt", :tests [{:line 6, :description "Wake fighters on carrier.", :givens [{:type :map, :target :game-map, :rows ["C~"]} {:type :unit-props, :unit "C", :props {:mode :sentry}} {:type :container-state, :target "C", :props {:fighter-count 2, :awake-fighters 0}}], :whens [{:type :waiting-for-input, :unit "C", :set-mode true} {:type :key-press, :key :u, :input-fn :key-down}], :thens [{:type :container-prop, :target "C", :property :awake-fighters, :expected 2, :lookup :unit} {:type :unit-prop, :unit "C", :property :mode, :expected :sentry}]} {:line 18, :description "Carrier attention message shows fighter count.", :givens [{:type :map, :target :game-map, :rows ["C~"]} {:type :container-state, :target "C", :props {:fighter-count 3}}], :whens [{:type :waiting-for-input, :unit "C", :set-mode true}], :thens [{:type :message-contains, :area :attention, :text "carrier"} {:type :message-contains, :area :attention, :text "3 fighters"}]} {:line 29, :description "Damaged carrier attention message.", :givens [{:type :map, :target :game-map, :rows ["C~"]} {:type :unit-props, :unit "C", :props {:hits 5}} {:type :container-state, :target "C", :props {:fighter-count 0}}], :whens [{:type :waiting-for-input, :unit "C", :set-mode true}], :thens [{:type :message-contains, :area :attention, :text "Damaged"}]}]}